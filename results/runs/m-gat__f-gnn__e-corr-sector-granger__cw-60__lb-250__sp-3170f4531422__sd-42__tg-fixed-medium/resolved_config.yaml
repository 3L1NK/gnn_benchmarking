experiment_name: gat_corr_sector_granger_rolling_cv_y2021
data:
  price_file: data/processed/prices.parquet
  universe_file: data/processed/universe.csv
  start_date: '2000-01-01'
  end_date: '2021-12-31'
  target_horizon: 1
  target_type: regression
  target_name: log_return
  lookback_window: 250
  corr_window: 60
  corr_threshold: 0.4
  min_history: 250
graph:
  use_corr: true
  use_sector: true
  use_granger: true
  make_undirected: false
  granger_maxlag: 5
  granger_alpha: 0.01
  granger_topk: 50
  granger_top_k: 50
model:
  family: gnn
  type: gat
  heads: 4
  input_dim: 32
  hidden_dim: 128
  num_layers: 3
  dropout: 0.1
training:
  device: cuda
  batch_size: 16
  lr: 0.0005
  weight_decay: 1e-5
  max_epochs: 60
  gradient_clip: 1.0
  patience: 8
  val_start: '2021-01-01'
  test_start: '2021-01-01'
  num_workers: 4
loss:
  type: mse
evaluation:
  top_k: 20
  transaction_cost_bps: 0
  risk_free_rate: 0.0
  backtest_policies:
  - 5
  primary_rebalance_freq: 5
  results_path: results/ledger/ledger.jsonl
  out_dir: results/runs/
experiment:
  protocol_version: v1_rolling_cv_subset
  enforce_protocol: false
tuning:
  enabled: false
  objective: val_backtest_sharpe_annualized
  sample_mode: random
  seed: 42
  max_trials: 12
  tune_max_epochs: 12
  tune_patience: 4
  param_grid:
    hidden_dim:
    - 64
    - 128
    - 192
    num_layers:
    - 2
    - 3
    dropout:
    - 0.1
    - 0.2
    lr:
    - 0.0003
    - 0.0005
    - 0.001
    weight_decay:
    - 1.0e-06
    - 1.0e-05
    - 5.0e-05
    gradient_clip:
    - 0.8
    - 1.0
    - 1.2
    heads:
    - 1
    - 2
    - 4
    attn_dropout:
    - 0.0
    - 0.1
    - 0.2
  profile: medium
granger:
  max_lag: 5
  p_threshold: 0.01
cache:
  rebuild: false
